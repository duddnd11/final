<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
 <mapper namespace="com.yw.mapper.BoardMapper">
 	<select id="selectBoard" resultType="com.yw.vo.BoardVo">
 		SELECT * FROM board ORDER BY ref DESC, level ASC LIMIT #{size} OFFSET #{offset}
 	</select>
 	<select id="selectBoardAll" resultType="com.yw.vo.BoardVo">
 		SELECT * FROM board
 	</select>
 	<select id="detailBoard" resultType="com.yw.vo.BoardVo">
 		SELECT * FROM board WHERE idx=#{idx}
 	</select>
 	<select id="selectLevel" resultType="Int">
 		SELECT level FROM board WHERE ref=#{ref};
 	</select>
 	<insert id="writeBoard">
 		INSERT INTO board(title,content,writer,ref,level,step,imagename) VALUES(#{title},#{content},#{writer},#{ref},#{level},#{step},#{imagename})
 	</insert>
 	<update id="updateRef">
 		UPDATE board SET ref=#{idx} WHERE idx=#{idx}
 	</update>
 	<update id="updateLevel">
 		UPDATE board SET level=level+1 WHERE level>#{level} AND ref=#{ref};
 	</update>
 </mapper>